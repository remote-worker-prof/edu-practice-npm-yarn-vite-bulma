# Sass — расширенный гайд

## Что это
Sass — препроцессор CSS. Он добавляет переменные, вложенность, модули, миксины и функции, чтобы стили можно было масштабировать и сопровождать как код.

## Зачем Sass нужен в этом проекте
- Управлять темой Bulma через переменные.
- Держать стили структурированными по файлам.
- Быстро менять визуальные токены (цвета, радиусы, шрифты) без переписывания всего CSS.

## Мини‑теория: как Sass расширяет CSS
Sass добавляет несколько ключевых возможностей:
- переменные (`$primary`, `$radius`),
- вложенность селекторов,
- миксины (`@mixin` и `@include`),
- функции (`@function`),
- модули (`@use`, `@forward`).

Подробно о правилах Sass и его at‑rules см. официальную документацию.

## Синтаксис Sass/SCSS (подробно)

### SCSS и Sass — два синтаксиса
Sass поддерживает два варианта записи:
- **SCSS** — фигурные скобки и `;` (как в CSS). В проекте используется именно он (`.scss`).
- **Indented Sass** — без скобок и точек с запятой, важны отступы (`.sass`).

SCSS‑пример:
```scss
$primary: #c65a3a;

.button {
  background: $primary;
}
```

Sass‑пример:
```sass
$primary: #c65a3a

.button
  background: $primary
```

### Переменные
Переменные объявляются через `$`.
```scss
$radius: 12px;
$gap: 1.5rem;
```

Использование:
```scss
.card {
  border-radius: $radius;
  margin-top: $gap;
}
```

### Вложенность селекторов
Вложенность помогает группировать стили логически:
```scss
.card {
  padding: 1rem;

  .title {
    margin-bottom: 0.5rem;
  }
}
```

### Родительский селектор `&`
`&` ссылается на текущий селектор:
```scss
.button {
  &.is-primary {
    background: $primary;
  }

  &:hover {
    filter: brightness(1.05);
  }
}
```

### Интерполяция `#{}`
Используется, когда нужно собрать строку:
```scss
$size: 12;

.is-#{$size} {
  font-size: #{$size}px;
}
```

### Миксины и `@include`
Миксины — это переиспользуемые блоки стилей.
```scss
@mixin card-shadow($blur: 24px) {
  box-shadow: 0 10px $blur rgba(0, 0, 0, 0.12);
}

.card {
  @include card-shadow(32px);
}
```

### Миксины с `@content`
Позволяют передавать вложенные правила:
```scss
@mixin on-mobile {
  @media (max-width: 768px) {
    @content;
  }
}

.title {
  font-size: 2rem;

  @include on-mobile {
    font-size: 1.5rem;
  }
}
```

### Функции
Функции возвращают значение и помогают держать логику централизованной.
```scss
@use "sass:math";

@function to-rem($px) {
  @return math.div($px, 16px) * 1rem;
}

.title {
  font-size: to-rem(24px);
}
```

### Условия и циклы
Sass поддерживает базовые конструкции:
```scss
$theme: dark;

body {
  @if $theme == dark {
    background: #0f172a;
  } @else {
    background: #ffffff;
  }
}
```

Цикл `@for`:
```scss
@for $i from 1 through 4 {
  .mt-#{$i} {
    margin-top: #{$i}rem;
  }
}
```

Цикл `@each`:
```scss
$colors: (primary: #3b82f6, accent: #f97316);

@each $name, $value in $colors {
  .has-#{$name} {
    color: $value;
  }
}
```

### Списки и карты
Sass умеет работать со списками и map‑структурами:
```scss
$spacings: 0.25rem, 0.5rem, 1rem;
$palette: (primary: #3b82f6, dark: #0f172a);
```

Получение значения из карты:
```scss
@use "sass:map";

.button {
  background: map.get($palette, primary);
}
```

### Placeholder‑селекторы и `@extend`
`%placeholder` — шаблонный селектор, который не попадает в CSS напрямую:
```scss
%card-base {
  border-radius: 12px;
  padding: 1rem;
}

.card {
  @extend %card-base;
}
```

### Комментарии
- `//` — однострочный комментарий (не попадает в итоговый CSS).
- `/* */` — многострочный комментарий (может попасть в CSS в зависимости от настроек).

## Модульная система: @use и @forward
### @use
`@use` загружает модуль и делает его переменные, миксины и функции доступными через namespace. Это заменяет старый `@import`.

Основные правила:
- `@use` должен идти **до** любых правил (кроме `@forward`).
- Модули загружаются **один раз**, даже если подключить их несколько раз.
- Все члены доступны через пространство имён: `module.$var`, `@include module.mixin()`.

Пример:
```scss
@use "tokens";

.button {
  border-radius: tokens.$radius;
}
```

### @forward
`@forward` позволяет собрать несколько модулей в один «публичный» файл‑вход. Это удобно, когда хотите скрыть структуру внутренних файлов и дать одну точку входа.

Пример:
```scss
@forward "tokens";
@forward "mixins";
```

Если в файле есть и `@forward`, и `@use`, `@forward` пишут первым.

## Почему @import больше не рекомендуется
`@import` устарел: он создает глобальное пространство имен, может подключать файл несколько раз и усложняет анализ зависимостей. Его заменяет модульная система `@use`/`@forward`.

В Dart Sass `@import` считается deprecated с версии 1.80.0 и будет удален в Sass 3.0.0.

## Как это устроено в нашем проекте
Структура Sass:
- `_variables.scss` — токены и тема (цвета, шрифты, радиусы).
- `_base.scss` — базовые стили.
- `_layout.scss` — сетки и раскладки.
- `_components.scss` — карточки и компоненты.
- `_utilities.scss` — утилиты.
- `main.scss` — точка сборки, куда всё импортируется.

Важно: переменные темы должны быть объявлены **до** импорта Bulma, чтобы фреймворк применил ваши значения.

## Пример настройки темы
```scss
$primary: #c65a3a;
$body-background-color: #f3efe7;
$family-primary: "Space Grotesk", sans-serif;
```

## Типовые ошибки
- Переменные объявлены **после** импорта Bulma → тема не применяется.
- Смешивание `@import` и `@use` без понимания порядка загрузки.
- Дублирование токенов в нескольких файлах.

## Предупреждения Sass (что это значит)
Вы можете видеть предупреждения о deprecated‑возможностях (`@import`, глобальные функции). Это связано с переходом Sass на модульную систему.

Скрывать предупреждения зависимостей можно через `quietDeps`, но лучше понимать их смысл и планировать миграцию.

## Мини‑практика
1. Измените `$primary` и `$body-background-color` в `_variables.scss`.
2. Перезапустите dev‑сервер и убедитесь, что тема изменилась.
3. Добавьте новый токен (например, `$card-shadow`) и примените его в `_components.scss`.

## Короткий вывод
Sass — основной инструмент управления темой и структурой стилей. Освоив переменные и модульную систему, можно быстро менять дизайн и поддерживать порядок в проекте.
