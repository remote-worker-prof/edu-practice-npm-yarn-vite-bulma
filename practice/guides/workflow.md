# Workflow: yarn + Vite + Sass

## Зачем нужен этот workflow
Связка решает полный цикл: зависимости → dev‑сервер → сборка → preview. Yarn управляет пакетами и запускает скрипты, Vite запускает сервер и собирает проект, Sass компилирует стили и передает их в Vite.

## Ключевая схема
```
команды yarn/npm
    ↓
скрипты в package.json
    ↓
Vite (dev/build/preview)
    ↓
Sass (компиляция .scss)
    ↓
готовый CSS + JS + HTML
```

## 1) Установка зависимостей
Команда устанавливает пакеты в проект:
```bash
yarn
```

Результат:
- создается `yarn.lock`;
- зависимости доступны для Vite и Sass.

## 2) Запуск dev‑сервера
```bash
yarn dev
```

Что вызывается по цепочке:
1. `yarn dev` читает `package.json` и запускает скрипт `dev` → `vite`.
2. Vite поднимает dev‑сервер и выводит адрес (обычно `http://localhost:5173`).
3. Vite читает `index.html` как входную точку.
4. Из `index.html` импортируется `src/main.js`.
5. В `src/main.js` импортируется `src/styles/main.scss`.
6. Vite вызывает Sass‑компилятор для `.scss` и получает CSS.
7. CSS и JS собираются в единый модульный граф и отдаются в браузер.
8. При изменениях файлов Vite пересобирает только затронутые модули и отправляет HMR‑обновления.

Коротко по сути:
- Vite поднимает сервер (обычно `http://localhost:5173`);
- Vite читает `index.html` как входной файл;
- Vite обрабатывает `src/main.js` и связанные модули;
- Sass компилирует `src/styles/main.scss` в CSS;
- браузер получает обновления без перезапуска (HMR).

## 3) Сборка (production)
```bash
yarn build
```

Что происходит:
- Vite собирает оптимизированные файлы в `dist/`;
- Sass превращает `.scss` в финальный CSS;
- зависимости бандлятся и оптимизируются.

## 4) Preview
```bash
yarn preview
```

Что происходит:
- Vite показывает **собранную** версию из `dist/`;
- это не dev‑сервер, а проверка production‑сборки.

## 5) Где находится связка в коде
- `package.json` → скрипты `dev/build/preview`.
- `index.html` → входная точка приложения.
- `src/main.js` → подключает `src/styles/main.scss`.
- `src/styles/main.scss` → импортирует Bulma и кастомные стили.
- `src/styles/_variables.scss` → переменные темы (должны быть **до** Bulma).

## 6) Почему Sass важен
Sass нужен для управления темой Bulma и структуры стилей. Если переменные заданы **после** Bulma, изменения не применятся.

## 7) Типовой порядок работы
1. `yarn` — установка зависимостей.
2. `yarn dev` — разработка и правки.
3. Изменение `index.html` и `src/styles/_variables.scss`.
4. `yarn build` — проверка финальной сборки.
5. `yarn preview` — проверка результата.

## 8) Типовые проблемы
- Нельзя смешивать npm и yarn в одном проекте.
- Если `yarn dev` ругается на Sass — проверьте импорты и порядок в `main.scss`.
- Предупреждения Sass о `@import` и Bulma — допустимы для текущей версии.
